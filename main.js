(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=({eventE:e,cpuGrid:t,computersGameboard:r,playersGameboard:n,HelperFunction:a})=>{const o=t,s=e,c=s.target.getAttribute("data-pair-coordinate"),i="object"==typeof r.ReceiveAttack({coordinate:JSON.parse(c)}),d=({sunk:e})=>e?"player-winner":"not-yet",{DisableClick:l}=a();s.target.classList.add(`${i}`),o.classList.toggle(`${l({condition:i})}`);const u=r.AttackPlayerSquare({hitInfo:i,player:r,gameboard:n});let p;setTimeout((()=>{u.forEach(((e,t)=>{setTimeout((()=>{const[t,r]=e.COORDINATE;p=e.ISSHIPMISSED;document.querySelector(`.first-gameboard-grid > div[data-pair-coordinate='[${t}, "${r}"]']`).classList.add(`${p}`),o.classList.toggle(`${l({condition:p})}`)}),800*t)}))}),800);const m=n.IsShipAllSunk({enemyGameboard:r.SHIPS}),S=document.querySelector(".announce-winner");S.classList.toggle(`${d({sunk:m})}`),o.classList.toggle(`${l({condition:m})}`);const h=r.IsShipAllSunk({enemyGameboard:n.SHIPS});S.classList.toggle(`${d({sunk:h})}`);const g=({opponent:e})=>e?"CPU wins ðŸŽ‰":"Player wins ðŸŽ‰";return document.querySelector(".winner").textContent=g({opponent:h}),g({opponent:h})},r=({gameboard:e,gameboardElement:t})=>{const r=(({gameboard:e})=>{const t=e.SHIPPLACES,r=[];for(let e=0;e<t.length;e+=1){const{SHIP:n,COORDINATES:a}=t[e];for(let e=0;e<a.length;e+=1){const t=a[e];r.push({SHIP:n,COORDINATE:t})}}return r})({gameboard:e});r.forEach((({COORDINATE:e})=>{const[r,n]=e;document.querySelector(`${t} > div[data-pair-coordinate='[${r}, "${n}"]']`).setAttribute("id","ships")}))},n=({parentElement:e})=>{const t=document.querySelector(`${e}`);return(()=>{const e=[];let t=97,r=1;for(let n=0;n<100;n+=1)t>106&&(t=97,r+=1),e[n]=`[${r}, "${String.fromCharCode(t)}"]`,t+=1;return e})().map((e=>{const r=document.createElement("div");return r.setAttribute("data-pair-coordinate",e),t.appendChild(r),r}))},a=({parent:e})=>{const t=document.createElement("div"),r=document.createElement("h2"),n=document.createElement("button"),a=document.querySelector(`${e}`);return n.innerText="Restart",r.classList.add("winner"),n.classList.add("restart"),t.classList.add("announce-winner"),t.appendChild(r),t.appendChild(n),a.appendChild(t),{div:t,h2:r,button:n,parentEl:a}},o=()=>{const e={CARRIER:{LENGTH:5,hits:0,sunk:!1},BATTLESHIP:{LENGTH:4,hits:0,sunk:!1},SUBMARINE:{LENGTH:3,hits:0,sunk:!1},CRUISE:{LENGTH:3,hits:0,sunk:!1},DESTROYER:{LENGTH:2,hits:0,sunk:!1}};return{SHIPS:e,GetShipStatus:({ship:t})=>{const{hits:r}=e[t],{sunk:n}=e[t];return{hits:r,sunk:n}},Hit:({ship:t})=>{e[t].hits+=1},IsSunk:({ship:t})=>{e[t].sunk=e[t].LENGTH===e[t].hits}}},s=()=>{const e=o(),t=[],r=[];return{SHIPS:e,SHIPPLACES:t,MISSEDSHOTS:r,GetShipCoordinates:({pairOfCoordinates:t,ship:r,axis:n})=>{const a=t,o=r,s=n,{LENGTH:c}=e.SHIPS[o],{Row:i,Column:d}={Row:({coordinates:e,shipLength:t})=>{const r=t,[n,a]=e,o=[],s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];let c=0;for(let e=0;e<s.length;e+=1)if(s[e]===n){c=e;break}for(let e=0;e<r;e+=1)o[e]=[c+=1,a];return o},Column:({coordinates:e,shipLength:t})=>{const r=t,[n,a]=e,o=[[n,a]];let s=a.charCodeAt(0);for(let e=1;e<r;e+=1)o[e]=[n,String.fromCharCode(s+=1)];return o}};return"vertical"===s?{SHIP:o,COORDINATES:i({coordinates:a,shipLength:c})}:{SHIP:o,COORDINATES:d({coordinates:a,shipLength:c})}},ReceiveAttack:({coordinate:n})=>{const[a,o]=n,s=[];for(let e=0;e<t.length;e+=1){const{SHIP:r,COORDINATES:n}=t[e];for(let e=0;e<n.length;e+=1){const t=n[e];s.push({SHIP:r,PAIR:t})}}for(let t=0;t<s.length;t+=1){const{SHIP:r,PAIR:n}=s[t],[c,i]=n;if(c===a&&i===o)return e.Hit({ship:r}),e.IsSunk({ship:r}),r}return r.push([a,o]),[a,o]},IsShipAllSunk:({enemyGameboard:e})=>{const t=Object.entries(e.SHIPS),r=[];for(let e=0;e<t.length;e+=1){const n=t[e];for(let t=0;t<n.length;t+=1){const{sunk:a}=n[t];r[e]=a}}return!r.includes(!1)}}},c=()=>{const e=({places:t=[],placed:r=new Set,helperFunction:n})=>{if(5===t.length)return t;const{GetRandomShipPlacement:a}=n(),{COORDINATE:o,AXIS:c,SHIP:i}=a();if((({places:e,ship:t})=>{const r=e,n=t;let a=!1;for(let e=0;e<r.length;e+=1)if(n===r[e].SHIP){a=!0;break}return a})({places:t,ship:i}))return e({places:t,placed:r,helperFunction:n});const{GetShipCoordinates:d}=s(),l=d({pairOfCoordinates:o,axis:c,ship:i}),{COORDINATES:u}=l;return(({coordinates:e})=>{const t=e;let r=!1;for(let e=0;e<t.length;e+=1){const[n,a]=t[e];if(n>10){r=!0;break}if(a.charCodeAt(0)>106){r=!0;break}}return r})({coordinates:u})||(({coordinates:e,placed:t})=>{const r=e;let n=!1;for(let e=0;e<r.length;e+=1){const[a,o]=r[e];if(t.has(`${a}-${o}`)){n=!0;break}t.has(`${a}-${o}`)||t.add(`${a}-${o}`)}return n})({coordinates:u,placed:r})?e({places:t,placed:r,helperFunction:n}):e({places:t.concat(l),placed:r,helperFunction:n})};return{SetShipsPlaces:e}},i=()=>{const e=({min:e,max:t})=>Math.floor(Math.random()*(t+1-e)+e),t=()=>{const e=[];let t=97,r=1;for(let n=0;n<100;n+=1)t>106&&(t=97,r+=1),e[n]=[r,String.fromCharCode(t)],t+=1;return e};return{IsHit:({info:e})=>"object"==typeof e,DisableClick:({condition:e})=>e?"disable-pointer":"enable-pointer",GetRandomNumber:e,CreateGrid:t,GetRandomShipPlacement:()=>{const r=e({min:0,max:99}),n=e({min:0,max:1}),a=e({min:0,max:4});return{COORDINATE:t()[r],AXIS:["vertical","horizontal"][n],SHIP:["CARRIER","BATTLESHIP","SUBMARINE","CRUISE","DESTROYER"][a]}},GetSeparatedCoordinate:({SHIPHIT:e=[]})=>{const t=e;return{NUMBER:t.map((e=>e[0])),LETTER:t.map((e=>e[1]))}}}},d=()=>({computersGameboard:Object.assign(s(),(()=>{const e=new Set,t=new Set,r=()=>{const{GetRandomNumber:t}=i(),n=t({min:1,max:10}),a=t({min:97,max:106}),o=String.fromCharCode(a);return e.has(`${n}-${o}`)?100===e.size?[n,o]:r():(e.add(`${n}-${o}`),[n,o])},n=({array:t})=>{const a=t,{GetRandomNumber:o}=i(),s=o({min:0,max:a.length-1}),[c,d]=a[s];return e.has(`${c}-${d}`)?a.map((t=>{const[r,n]=t;return!e.has(`${r}-${n}`)})).includes(!0)?n({array:a}):r():(e.add(`${c}-${d}`),[c,d])},a=({coordinate:e})=>{const[t,r]=e;return[[-1,0],[0,-1],[1,0],[0,1]].map((e=>{const[n,a]=e;return[t+n,r.charCodeAt(0)+a]})).filter((e=>{const[t,r]=e;return t>=1&&t<=10&&r>=97&&r<=106})).map((e=>{const[t,r]=e;return[t,String.fromCharCode(r)]}))},o=({array:t=[]})=>t.filter((t=>{const[r,n]=t;return!e.has(`${r}-${n}`)})),s=[],c=({hitInfo:e,status:t,player:d,gameboard:l,array:u=[],shipHit:p})=>{const m=e,S=t;if(d.IsShipAllSunk({enemyGameboard:l.SHIPS}))return u;if(!1===m)return u;if(!0===S)return u;const{IsHit:h}=i();if(0!==s.length){const t=n({array:s}),r=h({info:l.ReceiveAttack({coordinate:t})});if(!r){const e=a({coordinate:t});o({array:e}).map((e=>s.push(e)))}return u.concat({COORDINATE:t,ISSHIPMISSED:r},c({hitInfo:e,gameboard:l,status:r,array:u,player:d,shipHit:p}))}const g=r(),E=h({info:l.ReceiveAttack({coordinate:g})});if(!E){const e=a({coordinate:g});o({array:e}).map((e=>s.push(e)))}return u.concat({COORDINATE:g,ISSHIPMISSED:E},c({hitInfo:e,gameboard:l,status:E,array:u,player:d,shipHit:p}))};return{VISITED:e,COORDINATES:t,GetAdjacentSlot:a,GetUnvisitedAdjacencySlot:o,SetUnvisited:r,AttackPlayerSquare:c}})())}),l=()=>({playersGameboard:s()}),u=function(){const e=document.createElement("dialog"),t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return r.innerText="Start",n.innerText="Randomize",r.classList.add("start-dialog"),r.classList.add("start-game"),n.classList.add("reposition"),e.appendChild(t),t.appendChild(r),t.appendChild(n),e},p=({parent:e,elements:t})=>{t.forEach((t=>{e.removeChild(t)}))},m=e.p+"bbc29c59265eb438dc9c.svg";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("header");e.setAttribute("id","header");const o=new Image;o.src=m,e.appendChild(o);document.querySelector(".year-date").textContent=`${(new Date).getFullYear()}`;const s=u();e.appendChild(s);const S=document.querySelector(".start-game");s.showModal(),S.addEventListener("click",(()=>{s.close(),s.classList.toggle("hide-modal")})),n({parentElement:".first-gameboard-grid"}),n({parentElement:".second-gameboard-grid"});const h=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),g=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),{playersGameboard:E}=l(),{computersGameboard:f}=d();h.forEach((e=>E.SHIPPLACES.push(e))),g.forEach((e=>f.SHIPPLACES.push(e)));document.querySelector(".reposition").addEventListener("click",(()=>{for(;0!==E.SHIPPLACES.length;)E.SHIPPLACES.shift();const e=document.querySelector(".first-gameboard-grid"),t=document.querySelectorAll(".first-gameboard-grid > div");p({parent:e,elements:t}),n({parentElement:".first-gameboard-grid"});c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}).forEach((e=>{E.SHIPPLACES.push(e)})),r({gameboard:E,gameboardElement:".first-gameboard-grid"})})),r({gameboard:E,gameboardElement:".first-gameboard-grid"}),a({parent:"header#header"}).button.addEventListener("click",(()=>(({firstGrid:e,secondGrid:a,firstParent:o,secondParent:s})=>{const m=document.querySelectorAll(`${e}`),S=document.querySelector(`${o}`),h=document.querySelectorAll(`${a}`),g=document.querySelector(`${s}`);p({elements:m,parent:S}),p({elements:h,parent:g}),n({parentElement:o}),n({parentElement:s});const E=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),f=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),{playersGameboard:b}=l(),{computersGameboard:I}=d();E.forEach((e=>b.SHIPPLACES.push(e))),f.forEach((e=>I.SHIPPLACES.push(e))),r({gameboard:b,gameboardElement:".first-gameboard-grid"});const C=document.querySelector("header#header"),P=document.querySelector("dialog");C.removeChild(P);const y=u();C.appendChild(y),y.showModal(),document.querySelector(".start-game").addEventListener("click",(()=>{y.close(),y.classList.toggle("hide-modal")})),document.querySelector(".reposition").addEventListener("click",(()=>{for(;0!==b.SHIPPLACES.length;)b.SHIPPLACES.shift();const e=document.querySelector(".first-gameboard-grid"),t=document.querySelectorAll(".first-gameboard-grid > div");p({parent:e,elements:t}),n({parentElement:".first-gameboard-grid"}),c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}).forEach((e=>{b.SHIPPLACES.push(e)})),r({gameboard:b,gameboardElement:".first-gameboard-grid"})}));const A=document.querySelector(".second-gameboard-grid");A.classList.toggle("disable-pointer"),document.querySelectorAll(".second-gameboard-grid > div").forEach((e=>{e.addEventListener("click",(e=>{t({eventE:e,cpuGrid:A,computersGameboard:I,playersGameboard:b,HelperFunction:i})}),{once:!0})}))})({firstParent:".first-gameboard-grid",secondParent:".second-gameboard-grid",firstGrid:".first-gameboard-grid > div",secondGrid:".second-gameboard-grid > div"})));const b=document.querySelector(".announce-winner");document.querySelector(".restart").addEventListener("click",(()=>{b.classList.remove("player-winner"),b.classList.remove("not-yet")}));const I=document.querySelector(".second-gameboard-grid");document.querySelectorAll(".second-gameboard-grid > div").forEach((e=>{e.addEventListener("click",(e=>{t({eventE:e,cpuGrid:I,computersGameboard:f,playersGameboard:E,HelperFunction:i})}),{once:!0})}))}))})();
//# sourceMappingURL=main.js.map