(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=({eventE:e,cpuGrid:t,computersGameboard:r,playersGameboard:n,HelperFunction:o})=>{const a=t,s=e,c=s.target.getAttribute("data-pair-coordinate"),i="object"==typeof r.ReceiveAttack({coordinate:JSON.parse(c)}),d=({sunk:e})=>e?"player-winner":"not-yet",{DisableClick:l}=o();s.target.classList.add(`${i}`),a.classList.toggle(`${l({condition:i})}`);const u=r.AttackPlayerSquare({hitInfo:i,player:r,gameboard:n});let p;setTimeout((()=>{u.forEach(((e,t)=>{setTimeout((()=>{const[t,r]=e.COORDINATE;p=e.ISSHIPMISSED;document.querySelector(`.first-gameboard-grid > div[data-pair-coordinate='[${t}, "${r}"]']`).classList.add(`${p}`),a.classList.toggle(`${l({condition:p})}`)}),800*t)}))}),800);const m=n.IsShipAllSunk({enemyGameboard:r.SHIPS}),S=document.querySelector(".announce-winner");S.classList.toggle(`${d({sunk:m})}`),a.classList.toggle(`${l({condition:m})}`);const h=r.IsShipAllSunk({enemyGameboard:n.SHIPS});S.classList.toggle(`${d({sunk:h})}`);const g=({opponent:e})=>e?"CPU wins ðŸŽ‰":"Player wins ðŸŽ‰";return document.querySelector(".winner").textContent=g({opponent:h}),g({opponent:h})},r=({gameboard:e,gameboardElement:t})=>{const r=(({gameboard:e})=>{const t=e.SHIPPLACES,r=[];for(let e=0;e<t.length;e+=1){const{SHIP:n,COORDINATES:o}=t[e];for(let e=0;e<o.length;e+=1){const t=o[e];r.push({SHIP:n,COORDINATE:t})}}return r})({gameboard:e});r.forEach((({COORDINATE:e})=>{const[r,n]=e;document.querySelector(`${t} > div[data-pair-coordinate='[${r}, "${n}"]']`).setAttribute("id","ships")}))},n=({parentElement:e})=>{const t=document.querySelector(`${e}`);return(()=>{const e=[];let t=97,r=1;for(let n=0;n<100;n+=1)t>106&&(t=97,r+=1),e[n]=`[${r}, "${String.fromCharCode(t)}"]`,t+=1;return e})().map((e=>{const r=document.createElement("div");return r.setAttribute("data-pair-coordinate",e),t.appendChild(r),r}))},o=({parent:e})=>{const t=document.createElement("div"),r=document.createElement("h2"),n=document.createElement("button"),o=document.querySelector(`${e}`);return n.innerText="Restart",r.classList.add("winner"),n.classList.add("restart"),t.classList.add("announce-winner"),t.appendChild(r),t.appendChild(n),o.appendChild(t),{div:t,h2:r,button:n,parentEl:o}},a=()=>{const e={CARRIER:{LENGTH:5,hits:0,sunk:!1},BATTLESHIP:{LENGTH:4,hits:0,sunk:!1},SUBMARINE:{LENGTH:3,hits:0,sunk:!1},CRUISE:{LENGTH:3,hits:0,sunk:!1},DESTROYER:{LENGTH:2,hits:0,sunk:!1}};return{SHIPS:e,GetShipStatus:({ship:t})=>{const{hits:r}=e[t],{sunk:n}=e[t];return{hits:r,sunk:n}},Hit:({ship:t})=>{e[t].hits+=1},IsSunk:({ship:t})=>{e[t].sunk=e[t].LENGTH===e[t].hits}}},s=()=>{const e=a(),t=[],r=[];return{SHIPS:e,SHIPPLACES:t,MISSEDSHOTS:r,GetShipCoordinates:({pairOfCoordinates:t,ship:r,axis:n})=>{const o=t,a=r,s=n,{LENGTH:c}=e.SHIPS[a],{Row:i,Column:d}={Row:({coordinates:e,shipLength:t})=>{const r=t,[n,o]=e,a=[],s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];let c=0;for(let e=0;e<s.length;e+=1)if(s[e]===n){c=e;break}for(let e=0;e<r;e+=1)a[e]=[c+=1,o];return a},Column:({coordinates:e,shipLength:t})=>{const r=t,[n,o]=e,a=[[n,o]];let s=o.charCodeAt(0);for(let e=1;e<r;e+=1)a[e]=[n,String.fromCharCode(s+=1)];return a}};return"vertical"===s?{SHIP:a,COORDINATES:i({coordinates:o,shipLength:c})}:{SHIP:a,COORDINATES:d({coordinates:o,shipLength:c})}},ReceiveAttack:({coordinate:n})=>{const[o,a]=n,s=[];for(let e=0;e<t.length;e+=1){const{SHIP:r,COORDINATES:n}=t[e];for(let e=0;e<n.length;e+=1){const t=n[e];s.push({SHIP:r,PAIR:t})}}for(let t=0;t<s.length;t+=1){const{SHIP:r,PAIR:n}=s[t],[c,i]=n;if(c===o&&i===a)return e.Hit({ship:r}),e.IsSunk({ship:r}),r}return r.push([o,a]),[o,a]},IsShipAllSunk:({enemyGameboard:e})=>{const t=Object.entries(e.SHIPS),r=[];for(let e=0;e<t.length;e+=1){const n=t[e];for(let t=0;t<n.length;t+=1){const{sunk:o}=n[t];r[e]=o}}return!r.includes(!1)}}},c=()=>{const e=({places:t=[],placed:r=new Set,helperFunction:n})=>{if(5===t.length)return t;const{GetRandomShipPlacement:o}=n(),{COORDINATE:a,AXIS:c,SHIP:i}=o();if((({places:e,ship:t})=>{const r=e,n=t;let o=!1;for(let e=0;e<r.length;e+=1)if(n===r[e].SHIP){o=!0;break}return o})({places:t,ship:i}))return e({places:t,placed:r,helperFunction:n});const{GetShipCoordinates:d}=s(),l=d({pairOfCoordinates:a,axis:c,ship:i}),{COORDINATES:u}=l;return(({coordinates:e})=>{const t=e;let r=!1;for(let e=0;e<t.length;e+=1){const[n,o]=t[e];if(n>9){r=!0;break}if(o.charCodeAt(0)>105){r=!0;break}}return r})({coordinates:u})||(({coordinates:e,placed:t})=>{const r=e;let n=!1;for(let e=0;e<r.length;e+=1){const[o,a]=r[e];if(t.has(`${o}-${a}`)){n=!0;break}t.has(`${o}-${a}`)||t.add(`${o}-${a}`)}return n})({coordinates:u,placed:r})?e({places:t,placed:r,helperFunction:n}):e({places:t.concat(l),placed:r,helperFunction:n})};return{SetShipsPlaces:e}},i=()=>{const e=({min:e,max:t})=>Math.floor(Math.random()*(t+1-e)+e),t=()=>{const e=[];let t=97,r=1;for(let n=0;n<100;n+=1)t>106&&(t=97,r+=1),e[n]=[r,String.fromCharCode(t)],t+=1;return e};return{IsHit:({info:e})=>"object"==typeof e,DisableClick:({condition:e})=>e?"disable-pointer":"enable-pointer",GetRandomNumber:e,CreateGrid:t,GetRandomShipPlacement:()=>{const r=e({min:0,max:99}),n=e({min:0,max:1}),o=e({min:0,max:4});return{COORDINATE:t()[r],AXIS:["vertical","horizontal"][n],SHIP:["CARRIER","BATTLESHIP","SUBMARINE","CRUISE","DESTROYER"][o]}}}},d=()=>{const e=Object.assign(s(),(()=>{const e=[],t=[],r=()=>{const{GetRandomNumber:n,CreateGrid:o}=i(),a=n({min:0,max:99}),[s,c]=o()[a];return e.includes(`${s}-${c}`)?100===e.length?[s,c]:r():(e.push(`${s}-${c}`),t.push([s,c]),[s,c])},n=({hitInfo:e,status:t,player:o,gameboard:a,array:s=[]})=>{const c=e,d=t;if(o.IsShipAllSunk({enemyGameboard:a.SHIPS}))return s;if(!1===c)return s;if(!0===d)return s;const l=r(),u=a.ReceiveAttack({coordinate:l}),{IsHit:p}=i(),m=p({info:u});return s.concat({COORDINATE:l,ISSHIPMISSED:m},n({hitInfo:e,gameboard:a,status:m,array:s,player:o}))};return{VISITED:e,COORDINATES:t,SetUnvisited:r,AttackPlayerSquare:n}})());return{computersGameboard:e}},l=()=>({playersGameboard:s()}),u=function(){const e=document.createElement("dialog"),t=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div");return r.innerText="Start",n.innerText="Randomize",r.classList.add("start-dialog"),r.classList.add("start-game"),n.classList.add("reposition"),e.appendChild(t),t.appendChild(r),t.appendChild(n),e},p=({parent:e,elements:t})=>{t.forEach((t=>{e.removeChild(t)}))},m=e.p+"bbc29c59265eb438dc9c.svg";window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("header");e.setAttribute("id","header");const a=new Image;a.src=m,e.appendChild(a);document.querySelector(".year-date").textContent=`${(new Date).getFullYear()}`;const s=u();e.appendChild(s);const S=document.querySelector(".start-game");s.showModal(),S.addEventListener("click",(()=>{s.close(),s.classList.toggle("hide-modal")})),n({parentElement:".first-gameboard-grid"}),n({parentElement:".second-gameboard-grid"});const h=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),g=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),{playersGameboard:E}=l(),{computersGameboard:b}=d();h.forEach((e=>E.SHIPPLACES.push(e))),g.forEach((e=>b.SHIPPLACES.push(e)));document.querySelector(".reposition").addEventListener("click",(()=>{for(;0!==E.SHIPPLACES.length;)E.SHIPPLACES.shift();const e=document.querySelector(".first-gameboard-grid"),t=document.querySelectorAll(".first-gameboard-grid > div");p({parent:e,elements:t}),n({parentElement:".first-gameboard-grid"});c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}).forEach((e=>{E.SHIPPLACES.push(e)})),r({gameboard:E,gameboardElement:".first-gameboard-grid"})})),r({gameboard:E,gameboardElement:".first-gameboard-grid"}),o({parent:"header#header"}).button.addEventListener("click",(()=>(({firstGrid:e,secondGrid:o,firstParent:a,secondParent:s})=>{const m=document.querySelectorAll(`${e}`),S=document.querySelector(`${a}`),h=document.querySelectorAll(`${o}`),g=document.querySelector(`${s}`);p({elements:m,parent:S}),p({elements:h,parent:g}),n({parentElement:a}),n({parentElement:s});const E=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),b=c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}),{playersGameboard:f}=l(),{computersGameboard:I}=d();E.forEach((e=>f.SHIPPLACES.push(e))),b.forEach((e=>I.SHIPPLACES.push(e))),r({gameboard:f,gameboardElement:".first-gameboard-grid"});const P=document.querySelector("header#header"),C=document.querySelector("dialog");P.removeChild(C);const y=u();P.appendChild(y),y.showModal(),document.querySelector(".start-game").addEventListener("click",(()=>{y.close(),y.classList.toggle("hide-modal")})),document.querySelector(".reposition").addEventListener("click",(()=>{for(;0!==f.SHIPPLACES.length;)f.SHIPPLACES.shift();const e=document.querySelector(".first-gameboard-grid"),t=document.querySelectorAll(".first-gameboard-grid > div");p({parent:e,elements:t}),n({parentElement:".first-gameboard-grid"}),c().SetShipsPlaces({places:[],placed:new Set,helperFunction:i}).forEach((e=>{f.SHIPPLACES.push(e)})),r({gameboard:f,gameboardElement:".first-gameboard-grid"})}));const A=document.querySelector(".second-gameboard-grid");A.classList.toggle("disable-pointer"),document.querySelectorAll(".second-gameboard-grid > div").forEach((e=>{e.addEventListener("click",(e=>{t({eventE:e,cpuGrid:A,computersGameboard:I,playersGameboard:f,HelperFunction:i})}),{once:!0})}))})({firstParent:".first-gameboard-grid",secondParent:".second-gameboard-grid",firstGrid:".first-gameboard-grid > div",secondGrid:".second-gameboard-grid > div"})));const f=document.querySelector(".announce-winner");document.querySelector(".restart").addEventListener("click",(()=>{f.classList.remove("player-winner"),f.classList.remove("not-yet")}));const I=document.querySelector(".second-gameboard-grid");document.querySelectorAll(".second-gameboard-grid > div").forEach((e=>{e.addEventListener("click",(e=>{t({eventE:e,cpuGrid:I,computersGameboard:b,playersGameboard:E,HelperFunction:i})}),{once:!0})}))}))})();
//# sourceMappingURL=main.js.map